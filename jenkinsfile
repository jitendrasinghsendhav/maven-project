pipeline {
   agent any
   stages{
        stage('build'){
            steps{
            sh 'mvn clean package'
            sh "docker stop $( docker ps | grep tomcatwebapp | cut -d ' '  -f1) "
            sh "docker build . -t tomcatwebapp:${env.BUILD_ID}"
            sh "docker run -d -p 8181:8080 tomcatwebapp:${env.BUILD_ID}  "
            }
        }
   }
 }
